<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kevin OS</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.jfif">
    <link rel="stylesheet" href="style/landing-page.css">
</head>
<body>
    <div id="landing">
  <canvas id="bg-canvas"></canvas>

  <!-- CLI app window -->
 <div class="terminal-window" id="terminal-app">
  <div class="terminal-header">
    <div class="term-title">bash</div>
    <div class="term-buttons">
      <span class="min-btn">‚Äî</span>
      <span class="close-btn">‚úï</span>
    </div>
  </div>
  <div class="terminal-body">
    <pre id="cli-output"></pre>
  </div>
</div>


  <!-- Taskbar -->
<div class="taskbar">
  <div class="taskbar-icon" id="terminal-icon">
    <img src="assets/terminal.webp" alt="CLI">
  </div>
  <div class="taskbar-icon" id="notepad-icon">
    üìù
  </div>
</div>


<!-- UAC Modal -->
<div class="modal hidden">
  <div class="modal-window">
    <div class="modal-header">
      <span class="modal-title">User Account Control</span>
      <span class="modal-close">‚úï</span>
    </div>
    <div class="modal-body">
      <img src="assets/shield.png" alt="Shield">
      <p>Do you want to allow this app to make changes to your device?</p>
    </div>
    <div class="modal-footer">
      <button class="btn btn-confirm">Yes</button>
      <button class="btn btn-cancel">No</button>
    </div>
  </div>
</div>

<!-- Notepad Icon -->
<div id="notepad-icon" class="taskbar-icon">üìù</div>

<!-- Notepad App -->
<div id="notepad-app" class="window hidden">
  <div class="window-header">
    <span>Notepad - instructions.txt</span>
    <div class="window-buttons">
      <button class="close-btn">‚úñ</button>
    </div>
  </div>
  <div class="window-body">
    <pre contenteditable="true">
Hello If You're Having Trouble!

If you don‚Äôt know what to do:
1. Click the Terminal app
2. Press ENTER
3.  or Type "kevin --about" and hit ENTER
    </pre>
  </div>
</div>


<script>
const canvas = document.getElementById("bg-canvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let particles = [];
const mouse = { x: null, y: null };

class Particle {
    constructor() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.size = Math.random() * 2 + 1;
        this.speedX = (Math.random() - 0.5) * 1;
        this.speedY = (Math.random() - 0.5) * 1;
    }
    update() {
        this.x += this.speedX;
        this.y += this.speedY;
        if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
        if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
    }
    draw() {
        ctx.fillStyle = "#0f0";
        ctx.shadowBlur = 15;
        ctx.shadowColor = "#0f0";
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
    }
}

function init() {
    particles = [];
    for (let i = 0; i < 100; i++) {
        particles.push(new Particle());
    }
}

function connectParticles() {
    for (let a = 0; a < particles.length; a++) {
        for (let b = a + 1; b < particles.length; b++) {
            let dx = particles[a].x - particles[b].x;
            let dy = particles[a].y - particles[b].y;
            let distance = Math.sqrt(dx * dx + dy * dy);
            if (distance < 120) {
                ctx.strokeStyle = `rgba(0,255,0,${1 - distance / 120})`;
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(particles[a].x, particles[a].y);
                ctx.lineTo(particles[b].x, particles[b].y);
                ctx.stroke();
            }
        }
        if (mouse.x && mouse.y) {
            let dx = particles[a].x - mouse.x;
            let dy = particles[a].y - mouse.y;
            let distance = Math.sqrt(dx * dx + dy * dy);
            if (distance < 150) {
                ctx.strokeStyle = `rgba(0,255,0,${1 - distance / 150})`;
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(particles[a].x, particles[a].y);
                ctx.lineTo(mouse.x, mouse.y);
                ctx.stroke();
            }
        }
    }
}

let hue = 120;
function animate() {
    ctx.fillStyle = `black`;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    hue += 0.05;

    particles.forEach(p => {
        p.update();
        p.draw();
        if (mouse.x && mouse.y) {
            let dx = p.x - mouse.x;
            let dy = p.y - mouse.y;
            let distance = Math.sqrt(dx*dx + dy*dy);
            ctx.shadowBlur = distance < 100 ? 25 : 15;
        }
    });

    connectParticles();
    requestAnimationFrame(animate);
}

init();
animate();

window.addEventListener("resize", () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    init();
});

window.addEventListener("mousemove", (e) => {
    mouse.x = e.x;
    mouse.y = e.y;
});

window.addEventListener("mouseleave", () => {
    mouse.x = null;
    mouse.y = null;
});
</script>

<script>
const terminalApp = document.getElementById("terminal-app");
const terminalIcon = document.getElementById("terminal-icon");
const minimizeBtn = document.querySelector(".min-btn");
const closeBtn = document.querySelector(".close-btn");
const cliOutput = document.getElementById("cli-output");
const modal = document.querySelector(".modal");

// History
let history = [];
let historyIndex = -1;

// Input handling
let inputActive = false;
let currentCommand = "";

// === Taskbar buttons ===
terminalIcon.addEventListener("click", () => {
  terminalApp.classList.remove("hidden");
  terminalApp.style.zIndex = 20;
  focusPrompt();
});

minimizeBtn.addEventListener("click", () => {
  terminalApp.classList.add("hidden");
});

closeBtn.addEventListener("click", () => {
  resetTerminal();
  terminalApp.classList.add("hidden");
});

// Modal buttons
document.querySelector(".btn-confirm").addEventListener("click", () => {
  document.body.classList.add("fade-out");
  setTimeout(() => (window.location.href = "main-page.html"), 600);
});

document.querySelector(".btn-cancel").addEventListener("click", () => {
  modal.classList.add("hidden");
  printLine("Command cancelled. Type \"kevin --about\" again.");
  newPrompt();
});

// Draggable terminal
let offsetX, offsetY, isDragging = false;
const header = terminalApp.querySelector(".terminal-header");

header.addEventListener("mousedown", (e) => {
  isDragging = true;
  offsetX = e.clientX - terminalApp.offsetLeft;
  offsetY = e.clientY - terminalApp.offsetTop;
});
document.addEventListener("mouseup", () => (isDragging = false));
document.addEventListener("mousemove", (e) => {
  if (!isDragging) return;
  terminalApp.style.left = (e.clientX - offsetX) + "px";
  terminalApp.style.top = (e.clientY - offsetY) + "px";
});

// === Terminal core ===
function printLine(text = "") {
  cliOutput.innerHTML += text + "\n";
  cliOutput.scrollTop = cliOutput.scrollHeight;
}

function newPrompt(defaultText = "") {
  cliOutput.innerHTML += `<span class="prompt">kevinOS$ </span><span id="active-input" class="active-input" contenteditable="true">${defaultText}</span>`;
  focusPrompt();
  inputActive = true;
}

function focusPrompt() {
  const activeInput = document.getElementById("active-input");
  if (activeInput) {
    const range = document.createRange();
    const sel = window.getSelection();
    range.selectNodeContents(activeInput);
    range.collapse(false);
    sel.removeAllRanges();
    sel.addRange(range);
    activeInput.focus();
  }
}

// Boot sequence
function boot() {
  cliOutput.innerHTML = "";
  printLine("Welcome to KevinOS!");
  typeLine("kevinOS$ kevin --help", () => {
    setTimeout(() => {
      printLine("Available commands:");
      printLine("  kevin --about    ‚Üí Go to portfolio");
      printLine("  kevin --help     ‚Üí Show this help menu");
      setTimeout(() => newPrompt("kevin --about"), 400);
    }, 400);
  });
}

function resetTerminal() {
  history = [];
  historyIndex = -1;
  inputActive = false;
  cliOutput.innerHTML = "";
  boot();
}

function typeLine(line, callback) {
  let i = 0;
  function typing() {
    if (i < line.length) {
      cliOutput.innerHTML += line[i];
      i++;
      setTimeout(typing, 40);
    } else {
      cliOutput.innerHTML += "\n";
      if (callback) callback();
    }
  }
  typing();
}

// === Input handling ===
document.addEventListener("keydown", (e) => {
  const activeInput = document.getElementById("active-input");
  if (!activeInput) return;

  if (e.key === "Enter") {
    e.preventDefault();
    const input = activeInput.textContent.trim();
    activeInput.removeAttribute("id");
    history.push(input);
    historyIndex = history.length;
    inputActive = false;

    if (input === "kevin --about") {
      modal.classList.remove("hidden");
    } else if (input === "kevin --help") {
      printLine("Available commands:");
      printLine("  kevin --about    ‚Üí Go to portfolio");
      printLine("  kevin --help     ‚Üí Show this help menu");
      newPrompt();
    } else if (input) {
      printLine(`'${input}' is not recognized as an internal or external command,`);
      printLine("operable program or batch file.");
      newPrompt();
    } else {
      newPrompt();
    }
  }

  if (e.key === "ArrowUp") {
    if (history.length > 0 && historyIndex > 0) {
      historyIndex--;
      activeInput.textContent = history[historyIndex];
      focusPrompt();
    }
  }

  if (e.key === "ArrowDown") {
    if (historyIndex < history.length - 1) {
      historyIndex++;
      activeInput.textContent = history[historyIndex];
    } else {
      activeInput.textContent = "";
      historyIndex = history.length;
    }
    focusPrompt();
  }
});

// Boot up
window.addEventListener("load", boot);
//notepad HR assistance
const notepadApp = document.getElementById("notepad-app");
const notepadIcon = document.getElementById("notepad-icon");
// show notepad once on startup
  notepadApp.classList.remove("hidden");
  notepadApp.style.zIndex = 30;
  notepadApp.style.left = "auto";
  notepadApp.style.right = "20px";
  notepadApp.style.top = "50px";

notepadIcon.addEventListener("click", () => {
  notepadApp.classList.remove("hidden");
  notepadApp.style.zIndex = 30;

  // spawn at far right
  notepadApp.style.left = "auto";
  notepadApp.style.right = "20px";
  notepadApp.style.top = "50px";
});




// Close button
notepadApp.querySelector(".close-btn").addEventListener("click", () => {
  notepadApp.classList.add("hidden");
});


// === Draggable Notepad ===
let npOffsetX, npOffsetY, npDragging = false;
const npHeader = notepadApp.querySelector(".window-header");

// drag start
npHeader.addEventListener("mousedown", (e) => {
  npDragging = true;
  npOffsetX = e.clientX - notepadApp.offsetLeft;
  npOffsetY = e.clientY - notepadApp.offsetTop;
});

// drag end
document.addEventListener("mouseup", () => npDragging = false);

// drag move
document.addEventListener("mousemove", (e) => {
  if (!npDragging) return;
  notepadApp.style.left = (e.clientX - npOffsetX) + "px";
  notepadApp.style.top = (e.clientY - npOffsetY) + "px";
});


notepadIcon.addEventListener("click", () => {
  notepadApp.classList.remove("hidden");
  notepadApp.style.zIndex = 30;

  // reset position
  
  notepadApp.style.left = "auto";
  notepadApp.style.right = "20px";
  notepadApp.style.top = "50px";
});


</script>



</body>
</html>